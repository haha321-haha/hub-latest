# üõ°Ô∏è Á°¨ÁºñÁ†ÅÈ¢ÑÈò≤ÂíåËß£ÂÜ≥Êú∫Âà∂ÂÆåÊï¥ÊñπÊ°à - Â¢ûÂº∫Áâà

Âü∫‰∫éÂØπÈ°πÁõÆÂõΩÈôÖÂåñÁ°¨ÁºñÁ†Å‰øÆÂ§çÊñáÊ°£ÁöÑÊ∑±ÂÖ•Â≠¶‰π†ÂíåÂàÜÊûêÔºåÂà∂ÂÆöËøôÂ•óÂÆåÊï¥ÁöÑÁ°¨ÁºñÁ†ÅÈ¢ÑÈò≤ÂíåËß£ÂÜ≥Êú∫Âà∂ÔºåÂπ∂Êï¥Âêà‰∫ÜÁªÜËäÇ‰ºòÂåñÂª∫ËÆÆ„ÄÇ

## üìä ÈóÆÈ¢òÁé∞Áä∂ÂàÜÊûê

### Â∑≤Ëß£ÂÜ≥ÁöÑÈóÆÈ¢ò
- ‚úÖ ÈÖçÁΩÆÂÜ≤Á™ÅÔºönext-intl APIÁâàÊú¨ÂÜ≤Á™ÅÂ∑≤‰øÆÂ§ç
- ‚úÖ Ë∑ØÂæÑÈîôËØØÔºöÈÖçÁΩÆÊñá‰ª∂Ë∑ØÂæÑÈóÆÈ¢òÂ∑≤Ëß£ÂÜ≥
- ‚úÖ ÊûÑÂª∫Ë≠¶ÂëäÔºöÊäÄÊúØÈÖçÁΩÆÂ±ÇÈù¢ÈóÆÈ¢òÂ∑≤Ê∏ÖÁêÜ

### ÂΩìÂâçÊ†∏ÂøÉÈóÆÈ¢ò
- ‚ùå **Á°¨ÁºñÁ†ÅÊñáÊú¨**Ôºö2000+Â§ÑÁ°¨ÁºñÁ†ÅÂ≠óÁ¨¶‰∏≤Êï£Â∏ÉÂú®‰ª£Á†Å‰∏≠
- ‚ùå **ÁøªËØëÈîÆÁº∫Â§±**ÔºöÂ§ßÈáèÁ°¨ÁºñÁ†ÅÊñáÊú¨Áº∫Â∞ëÂØπÂ∫îÁöÑÁøªËØëÈîÆ
- ‚ùå **Êû∂ÊûÑ‰∏çÂÆåÊï¥**ÔºöÁº∫‰πèÁ≥ªÁªüÊÄßÁöÑÂõΩÈôÖÂåñÊû∂ÊûÑËÆæËÆ°
- ‚ùå **ÊµÅÁ®ãÁº∫Â§±**ÔºöÊ≤°ÊúâÁ°¨ÁºñÁ†ÅÈ¢ÑÈò≤ÂíåÊ£ÄÊµãÊú∫Âà∂

## üéØ Ëß£ÂÜ≥ÊñπÊ°àÊû∂ÊûÑ

### ‰∏âÂ±ÇÈò≤Êä§‰ΩìÁ≥ª

#### Á¨¨‰∏ÄÂ±ÇÔºöÈ¢ÑÈò≤Êú∫Âà∂ÔºàPreventionÔºâ
- ÂºÄÂèëËßÑËåÉÂà∂ÂÆö
- Ê®°ÊùøÂíåÂ∑•ÂÖ∑ÊîØÊåÅ
- ‰ª£Á†ÅÂÆ°Êü•ÊµÅÁ®ã
- **üÜï URLÈÖçÁΩÆ‰∏≠ÂøÉ**

#### Á¨¨‰∫åÂ±ÇÔºöÊ£ÄÊµãÊú∫Âà∂ÔºàDetectionÔºâ
- Ëá™Âä®ÂåñÊ£ÄÊµãÂ∑•ÂÖ∑
- CI/CDÈõÜÊàêÊ£ÄÊü•
- ÂÆûÊó∂ÁõëÊéßÁ≥ªÁªü
- **üÜï Êô∫ËÉΩÊ£ÄÊµãÁ≤æÂ∫¶‰ºòÂåñ**

#### Á¨¨‰∏âÂ±ÇÔºö‰øÆÂ§çÊú∫Âà∂ÔºàResolutionÔºâ
- Êô∫ËÉΩ‰øÆÂ§çÂ∑•ÂÖ∑
- ÊâπÈáèÂ§ÑÁêÜÁ≠ñÁï•
- Ë¥®ÈáèÈ™åËØÅÊµÅÁ®ã
- **üÜï ÂÆâÂÖ®‰øÆÂ§çÂíåÂõûÊªöÊú∫Âà∂**

## üõ†Ô∏è ÂÖ∑‰ΩìÂÆûÊñΩÊñπÊ°à

### Phase 1: È¢ÑÈò≤Êú∫Âà∂Âª∫ËÆæÔºà1Âë®Ôºâ

#### 1.1 ÂºÄÂèëËßÑËåÉÂà∂ÂÆö

**ÁøªËØëÈîÆÂëΩÂêçËßÑËåÉ**
```typescript
// Ê†áÂáÜÂëΩÂêçÁªìÊûÑ
const namingConventions = {
  // È°µÈù¢Á∫ßÔºöpages.[pageName].[section].[item]
  pages: {
    naturalTherapies: 'pages.naturalTherapies.hero.title',
    healthGuide: 'pages.healthGuide.sections.pain.title'
  },
  
  // ÁªÑ‰ª∂Á∫ßÔºöcomponents.[componentName].[element]
  components: {
    button: 'components.button.submit',
    modal: 'components.modal.title'
  },
  
  // ÈÄöÁî®Á∫ßÔºöcommon.[category].[item]
  common: {
    actions: 'common.actions.save',
    messages: 'common.messages.loading'
  },
  
  // ÂåªÂ≠¶Á∫ßÔºömedical.[category].[term]
  medical: {
    symptoms: 'medical.symptoms.cramping',
    treatments: 'medical.treatments.heatTherapy'
  }
};
```

**Á°¨ÁºñÁ†ÅÁ¶ÅÊ≠¢ËßÑÂàô**
```typescript
// ‰∏•Ê†ºÁ¶ÅÊ≠¢ÁöÑÁ°¨ÁºñÁ†ÅÊ®°Âºè
const forbiddenPatterns = [
  // Êù°‰ª∂Á°¨ÁºñÁ†Å
  /locale === 'zh' \? '([^']+)' : '([^']+)'/g,
  /locale === 'zh' \? "([^"]+)" : "([^"]+)"/g,
  
  // Áõ¥Êé•Â≠óÁ¨¶‰∏≤Á°¨ÁºñÁ†Å
  /'[\u4e00-\u9fff]+'/g,  // ‰∏≠ÊñáÂ≠óÁ¨¶‰∏≤
  /"[\\u4e00-\\u9fff]+"/g,  // ‰∏≠ÊñáÂ≠óÁ¨¶‰∏≤
  
  // ÁßëÂ≠¶ÂèÇÊï∞Á°¨ÁºñÁ†Å
  /temperature.*[0-9]+.*¬∞[CF]/g,
  /duration.*[0-9]+.*minute/g,
  /dosage.*[0-9]+.*mg/g,
  
  // üÜï Á°¨ÁºñÁ†ÅURLÊ£ÄÊµã
  /https:\/\/periodhub\.health(?!\/)/g,  // ÊéíÈô§Ë∑ØÂæÑ
  /`https:\/\/periodhub\.health\$\{/g,   // Ê®°ÊùøÂ≠óÁ¨¶‰∏≤‰∏≠ÁöÑÁ°¨ÁºñÁ†Å
];
```

#### 1.2 URLÈÖçÁΩÆ‰∏≠ÂøÉ üÜï

**Áªü‰∏ÄURLÁÆ°ÁêÜ**
```typescript
// lib/url-config.ts - Â¢ûÂº∫Áâà
export const URL_CONFIG = {
  BASE_URL: process.env.NEXT_PUBLIC_BASE_URL || 'https://www.periodhub.health',
  
  // Âü∫Á°ÄURLÁîüÊàê
  getUrl: (path: string = '') => {
    const cleanPath = path.startsWith('/') ? path : `/${path}`;
    return `${URL_CONFIG.BASE_URL}${cleanPath}`;
  },
  
  // ËßÑËåÉURLÁîüÊàê
  getCanonicalUrl: (path: string) => {
    return URL_CONFIG.getUrl(path);
  },
  
  // Open GraphÂõæÁâáURLÁîüÊàê
  getOgImageUrl: (path: string) => {
    return URL_CONFIG.getUrl(`/images/og${path}`);
  },
  
  // APIÁ´ØÁÇπURLÁîüÊàê
  getApiUrl: (endpoint: string) => {
    return URL_CONFIG.getUrl(`/api${endpoint}`);
  },
  
  // ÈùôÊÄÅËµÑÊ∫êURLÁîüÊàê
  getStaticUrl: (path: string) => {
    return URL_CONFIG.getUrl(`/static${path}`);
  }
};

// Êô∫ËÉΩ‰øÆÂ§çÂª∫ËÆÆÁîüÊàêÂô®
class SmartFixSuggester {
  suggestFix(match: string, context: string): string {
    if (context.includes('canonical')) {
      return `URL_CONFIG.getCanonicalUrl('${this.extractPath(match)}')`;
    }
    if (context.includes('og:image')) {
      return `URL_CONFIG.getOgImageUrl('${this.extractPath(match)}')`;
    }
    if (context.includes('api')) {
      return `URL_CONFIG.getApiUrl('${this.extractPath(match)}')`;
    }
    return `URL_CONFIG.getUrl('${this.extractPath(match)}')`;
  }
  
  private extractPath(url: string): string {
    return url.replace(/https:\/\/[^\/]+/, '');
  }
}
```

#### 1.3 ÂºÄÂèëÂ∑•ÂÖ∑ÊîØÊåÅ

**È°µÈù¢Ê®°ÊùøÁîüÊàêÂô®**
```typescript
// Ëá™Âä®ÁîüÊàêÂõΩÈôÖÂåñÈ°µÈù¢Ê®°Êùø
const createI18nPageTemplate = (pageName: string) => {
  return {
    // È°µÈù¢ÂÖÉÊï∞ÊçÆÊ®°Êùø
    metadata: {
      title: `{{${pageName}.meta.title}}`,
      description: `{{${pageName}.meta.description}}`,
      keywords: `{{${pageName}.meta.keywords}}`,
      // üÜï Ëá™Âä®ÁîüÊàêËßÑËåÉURL
      canonical: `URL_CONFIG.getCanonicalUrl('/${pageName}')`,
      ogImage: `URL_CONFIG.getOgImageUrl('/${pageName}.jpg')`
    },
    
    // È°µÈù¢ÂÜÖÂÆπÊ®°Êùø
    content: {
      hero: {
        title: `{{${pageName}.hero.title}}`,
        subtitle: `{{${pageName}.hero.subtitle}}`,
        description: `{{${pageName}.hero.description}}`
      },
      
      sections: {
        // Âä®ÊÄÅsectionÊ®°Êùø
        [sectionName]: {
          title: `{{${pageName}.sections.${sectionName}.title}}`,
          description: `{{${pageName}.sections.${sectionName}.description}}`
        }
      }
    }
  };
};
```

#### 1.4 ‰ª£Á†ÅÂÆ°Êü•ÊµÅÁ®ã

**Â¢ûÂº∫ÁâàPre-commit Hook**
```bash
#!/bin/bash
# .git/hooks/pre-commit - Â¢ûÂº∫Áâà

echo "üîç Ê£ÄÊü•Á°¨ÁºñÁ†Å..."

# ËøêË°åÁ°¨ÁºñÁ†ÅÊ£ÄÊµã
if ! node scripts/detect-hardcoded-urls.js --enhanced; then
    echo "‚ùå ÂèëÁé∞Á°¨ÁºñÁ†ÅURLÔºåÊèê‰∫§Ë¢´ÈòªÊ≠¢"
    echo "üí° ËøêË°å 'npm run hardcode:fix' Ëá™Âä®‰øÆÂ§ç"
    exit 1
fi

if ! node scripts/detect-hardcoded-text.js; then
    echo "‚ùå ÂèëÁé∞Á°¨ÁºñÁ†ÅÊñáÊú¨ÔºåÊèê‰∫§Ë¢´ÈòªÊ≠¢"
    echo "üí° ËøêË°å 'npm run hardcode:fix' Ëá™Âä®‰øÆÂ§ç"
    exit 1
fi

# üÜï Ê£ÄÊü•ÁøªËØëÈîÆÂÆåÊï¥ÊÄß
if ! node scripts/check-translation-keys.js; then
    echo "‚ùå ÁøªËØëÈîÆ‰∏çÂÆåÊï¥ÔºåÊèê‰∫§Ë¢´ÈòªÊ≠¢"
    exit 1
fi

echo "‚úÖ Á°¨ÁºñÁ†ÅÊ£ÄÊü•ÈÄöËøá"
exit 0
```

### Phase 2: Ê£ÄÊµãÊú∫Âà∂Âª∫ËÆæÔºà1Âë®Ôºâ

#### 2.1 Êô∫ËÉΩÊ£ÄÊµãÂ∑•ÂÖ∑

**Â¢ûÂº∫ÁâàÁ°¨ÁºñÁ†ÅÊñáÊú¨Ê£ÄÊµãÂô®**
```typescript
class EnhancedHardcodedTextDetector {
  private patterns = [
    // Êù°‰ª∂Á°¨ÁºñÁ†ÅÊ®°Âºè
    /locale === 'zh' \? '([^']+)' : '([^']+)'/g,
    /locale === 'zh' \? "([^"]+)" : "([^"]+)"/g,
    
    // Áõ¥Êé•‰∏≠ÊñáÂ≠óÁ¨¶‰∏≤
    /'[\u4e00-\u9fff]+'/g,
    /"[\u4e00-\u9fff]+"/g,
    
    // ÁßëÂ≠¶ÂèÇÊï∞Á°¨ÁºñÁ†Å
    /temperature.*[0-9]+.*¬∞[CF]/g,
    /duration.*[0-9]+.*minute/g,
    /dosage.*[0-9]+.*mg/g,
    
    // üÜï Â¢ûÂº∫URLÊ£ÄÊµã
    {
      pattern: /https:\/\/periodhub\.health(?!\/)/g,
      type: 'hardcoded-base-url',
      severity: 'high',
      description: 'Á°¨ÁºñÁ†ÅÂü∫Á°ÄURL'
    },
    {
      pattern: /`https:\/\/periodhub\.health\$\{/g,
      type: 'template-hardcoded-url',
      severity: 'high',
      description: 'Ê®°ÊùøÂ≠óÁ¨¶‰∏≤‰∏≠ÁöÑÁ°¨ÁºñÁ†ÅURL'
    }
  ];
  
  // üÜï Â¢ûÂº∫Ê£ÄÊµãÁ≤æÂ∫¶
  detectInFile(filePath: string): HardcodeReport[] {
    try {
      const content = fs.readFileSync(filePath, 'utf8');
      const fileReports = [];
      
      this.patterns.forEach(rule => {
        const matches = content.matchAll(rule.pattern);
        for (const match of matches) {
          const report = {
            file: filePath,
            line: this.getLineNumber(content, match.index),
            match: match[0],
            type: rule.type || this.classifyHardcode(match[0]),
            severity: rule.severity || 'medium',
            description: rule.description || 'Á°¨ÁºñÁ†ÅÂÜÖÂÆπ',
            suggestion: this.generateSmartSuggestion(match, rule.type, content)
          };
          
          fileReports.push(report);
        }
      });
      
      return fileReports;
    } catch (error) {
      log.error(`ËØªÂèñÊñá‰ª∂Â§±Ë¥•: ${filePath} - ${error.message}`);
      return [];
    }
  }
  
  // üÜï Êô∫ËÉΩ‰øÆÂ§çÂª∫ËÆÆ
  private generateSmartSuggestion(match: RegExpMatchArray, type: string, context: string): string {
    const [fullMatch, ...groups] = match;
    
    switch (type) {
      case 'hardcoded-base-url':
        return `Âª∫ËÆÆÊõøÊç¢‰∏∫: URL_CONFIG.getUrl('${this.extractPath(fullMatch)}')`;
      case 'template-hardcoded-url':
        return `Âª∫ËÆÆÊõøÊç¢‰∏∫: URL_CONFIG.getUrl(\`\${path}\`)`;
      case 'conditional-string':
        return `Âª∫ËÆÆÊõøÊç¢‰∏∫: t('${this.generateKeySuggestion(groups[0])}')`;
      case 'chinese-string':
        return `Âª∫ËÆÆÊõøÊç¢‰∏∫: t('${this.generateKeySuggestion(groups[0])}')`;
      case 'scientific-param':
        return `Âª∫ËÆÆÂ∞ÜÁßëÂ≠¶ÂèÇÊï∞ÁßªÂà∞ÁøªËØëÊñá‰ª∂‰∏≠ÔºåÊîØÊåÅÂ§öËØ≠Ë®ÄÂíåÂçï‰ΩçËΩ¨Êç¢`;
      default:
        return `Âª∫ËÆÆ‰ΩøÁî®ÁøªËØëÈîÆÊàñURL_CONFIGÊõø‰ª£Á°¨ÁºñÁ†Å`;
    }
  }
}
```

**ÁøªËØëÈîÆÂÆåÊï¥ÊÄßÊ£ÄÊü•Âô®**
```typescript
class TranslationKeyChecker {
  // Ê£ÄÊü•ÁøªËØëÈîÆÊòØÂê¶ÂÆåÊï¥
  checkCompleteness(): CompletenessReport {
    const usedKeys = this.extractUsedKeys();
    const availableKeys = this.extractAvailableKeys();
    
    const missingKeys = [...usedKeys].filter(key => !availableKeys.has(key));
    const unusedKeys = [...availableKeys].filter(key => !usedKeys.has(key));
    
    return {
      totalUsed: usedKeys.size,
      totalAvailable: availableKeys.size,
      missingKeys,
      unusedKeys,
      completeness: (usedKeys.size - missingKeys.length) / usedKeys.size
    };
  }
  
  // üÜï Â¢ûÂº∫ÈîÆÊèêÂèñÈÄªËæë
  extractUsedKeys() {
    const files = this.getSourceFiles();
    
    files.forEach(file => {
      try {
        const content = fs.readFileSync(file, 'utf8');
        
        // ÂåπÈÖç t('key') Ê®°Âºè
        const tMatches = content.matchAll(/t\(['"`]([^'"`]+)['"`]\)/g);
        for (const match of tMatches) {
          this.usedKeys.add(match[1]);
        }
        
        // ÂåπÈÖç useTranslations('namespace') + t('key') Ê®°Âºè
        const namespaceMatches = content.matchAll(/useTranslations\(['"`]([^'"`]+)['"`]\)/g);
        for (const match of namespaceMatches) {
          const namespace = match[1];
          const tMatches = content.matchAll(/t\(['"`]([^'"`]+)['"`]\)/g);
          for (const tMatch of tMatches) {
            this.usedKeys.add(`${namespace}.${tMatch[1]}`);
          }
        }
        
        // üÜï ÂåπÈÖçÂä®ÊÄÅÈîÆÁîüÊàê
        const dynamicMatches = content.matchAll(/t\(`([^`]+)\$\{/g);
        for (const match of dynamicMatches) {
          this.usedKeys.add(match[1]);
        }
      } catch (error) {
        log.debug(`Â§ÑÁêÜÊñá‰ª∂Â§±Ë¥•: ${file} - ${error.message}`);
      }
    });
  }
}
```

#### 2.2 ÂÆûÊó∂ÁõëÊéßÁ≥ªÁªü

**Â¢ûÂº∫ÁâàÊñá‰ª∂ÁõëÂê¨Âô®**
```typescript
// Êñá‰ª∂ÁõëÂê¨Âô® - Â¢ûÂº∫Áâà
class EnhancedFileWatcher {
  private watcher: chokidar.FSWatcher;
  private performanceMonitor: PerformanceMonitor;
  
  constructor() {
    this.watcher = chokidar.watch('app/**/*.{tsx,ts}', {
      ignored: /node_modules/,
      persistent: true
    });
    
    this.performanceMonitor = new PerformanceMonitor();
    
    this.watcher.on('change', (path) => {
      this.checkFileForHardcode(path);
    });
  }
  
  private async checkFileForHardcode(filePath: string) {
    const detector = new EnhancedHardcodedTextDetector();
    const reports = detector.detectInFile(filePath);
    
    if (reports.length > 0) {
      console.warn(`‚ö†Ô∏è ÂèëÁé∞Á°¨ÁºñÁ†Å: ${filePath}`);
      reports.forEach(report => {
        console.warn(`  Á¨¨${report.line}Ë°å: ${report.match}`);
        console.warn(`  Âª∫ËÆÆ: ${report.suggestion}`);
      });
      
      // üÜï ÊÄßËÉΩÂΩ±ÂìçËØÑ‰º∞
      this.performanceMonitor.assessImpact(filePath, reports);
    }
  }
}

// üÜï ÊÄßËÉΩÁõëÊéßÂô®
class PerformanceMonitor {
  assessImpact(filePath: string, reports: HardcodeReport[]) {
    // ÁõëÊéßURL_CONFIG‰ΩøÁî®È¢ëÁéá
    // Ê£ÄÊµãÊòØÂê¶ÊúâÊÄßËÉΩÈóÆÈ¢ò
    // Êèê‰æõ‰ºòÂåñÂª∫ËÆÆ
  }
}
```

### Phase 3: ‰øÆÂ§çÊú∫Âà∂Âª∫ËÆæÔºà2Âë®Ôºâ

#### 3.1 Êô∫ËÉΩ‰øÆÂ§çÂ∑•ÂÖ∑

**Â¢ûÂº∫ÁâàÂÆâÂÖ®‰øÆÂ§çËÑöÊú¨**
```typescript
class EnhancedSafeHardcodeFixer {
  // ‰øÆÂ§çÂçï‰∏™Êñá‰ª∂ - Â¢ûÂº∫Áâà
  async fixFile(filePath: string): Promise<FixResult> {
    try {
      // üÜï ÂàõÂª∫Â§á‰ªΩ
      await this.createBackup(filePath);
      
      // üÜï È™åËØÅÊñá‰ª∂ÂèØËØªÊÄß
      await this.validateFile(filePath);
      
      const content = fs.readFileSync(filePath, 'utf-8');
      let newContent = content;
      let hasChanges = false;
      
      // Â∫îÁî®‰øÆÂ§çËßÑÂàô
      const fixRules = this.getEnhancedFixRules();
      for (const rule of fixRules) {
        const matches = newContent.match(rule.pattern);
        if (matches) {
          newContent = newContent.replace(rule.pattern, rule.replacement);
          hasChanges = true;
        }
      }
      
      if (hasChanges) {
        // Ê∑ªÂä†ÂøÖË¶ÅÁöÑÂØºÂÖ•
        if (!newContent.includes('URL_CONFIG')) {
          newContent = this.addUrlConfigImport(newContent);
        }
        if (!newContent.includes('useTranslations')) {
          newContent = this.addTranslationImport(newContent);
        }
        
        // ÂÜôÂÖ•‰øÆÂ§çÂêéÁöÑÂÜÖÂÆπ
        fs.writeFileSync(filePath, newContent);
        
        // üÜï È™åËØÅ‰øÆÂ§çÁªìÊûú
        await this.validateFix(filePath);
        
        return {
          success: true,
          changes: hasChanges,
          backup: `${filePath}.backup`
        };
      }
      
      return { success: true, changes: false };
    } catch (error) {
      // üÜï Ëá™Âä®ÂõûÊªö
      await this.rollback(filePath);
      throw new Error(`‰øÆÂ§çÂ§±Ë¥•: ${error.message}`);
    }
  }
  
  // üÜï Â¢ûÂº∫‰øÆÂ§çËßÑÂàô
  private getEnhancedFixRules() {
    return [
      {
        pattern: /locale === 'zh' \? '([^']+)' : '([^']+)'/g,
        replacement: "t('$1')",
        type: 'conditional-string'
      },
      {
        pattern: /'([\u4e00-\u9fff]+)'/g,
        replacement: "t('$1')",
        type: 'chinese-string'
      },
      {
        pattern: /https:\/\/periodhub\.health(?!\/)/g,
        replacement: "URL_CONFIG.BASE_URL",
        type: 'hardcoded-url'
      },
      {
        pattern: /https:\/\/www\.periodhub\.health/g,
        replacement: "URL_CONFIG.BASE_URL",
        type: 'hardcoded-www-url'
      }
    ];
  }
  
  // üÜï Ëá™Âä®ÂõûÊªöÊú∫Âà∂
  private async rollback(filePath: string) {
    const backupFile = `${filePath}.backup`;
    if (fs.existsSync(backupFile)) {
      fs.copyFileSync(backupFile, filePath);
      fs.unlinkSync(backupFile);
      console.log(`‚úÖ Â∑≤ÂõûÊªö: ${filePath}`);
    }
  }
}
```

#### 3.2 ÊâπÈáèÂ§ÑÁêÜÁ≠ñÁï•

**Â¢ûÂº∫ÁâàÊâπÈáèÂ§ÑÁêÜÂô®**
```typescript
class EnhancedBatchProcessor {
  // Êåâ‰ºòÂÖàÁ∫ßÂ§ÑÁêÜÊñá‰ª∂ - Â¢ûÂº∫Áâà
  async processByPriority(): Promise<void> {
    const files = this.getFilesByPriority();
    const results = [];
    
    for (const file of files) {
      console.log(`Â§ÑÁêÜÊñá‰ª∂: ${file.path}`);
      
      try {
        const result = await this.fixFile(file.path);
        results.push({
          file: file.path,
          success: result.success,
          changes: result.changes
        });
        
        if (result.success) {
          console.log(`‚úÖ ‰øÆÂ§çÊàêÂäü: ${file.path}`);
        } else {
          console.log(`‚ùå ‰øÆÂ§çÂ§±Ë¥•: ${file.path}`);
        }
      } catch (error) {
        console.error(`‚ùå Â§ÑÁêÜÈîôËØØ: ${file.path}`, error);
        results.push({
          file: file.path,
          success: false,
          error: error.message
        });
      }
    }
    
    // üÜï ÁîüÊàêÂ§ÑÁêÜÊä•Âëä
    this.generateReport(results);
  }
  
  // üÜï ÁîüÊàêÂ§ÑÁêÜÊä•Âëä
  private generateReport(results: any[]) {
    const successCount = results.filter(r => r.success).length;
    const totalCount = results.length;
    
    console.log(`\nüìä ÊâπÈáèÂ§ÑÁêÜÊä•Âëä:`);
    console.log(`‚úÖ ÊàêÂäü: ${successCount}/${totalCount}`);
    console.log(`‚ùå Â§±Ë¥•: ${totalCount - successCount}/${totalCount}`);
    
    // ‰øùÂ≠òËØ¶ÁªÜÊä•Âëä
    fs.writeFileSync('hardcode-fix-report.json', JSON.stringify(results, null, 2));
  }
}
```

### Phase 4: Ë¥®Èáè‰øùËØÅÔºà1Âë®Ôºâ

#### 4.1 ÂÖ®Èù¢ÊµãËØïÈ™åËØÅ

**Â¢ûÂº∫ÁâàÂ§öËØ≠Ë®ÄÊµãËØïÂ•ó‰ª∂**
```typescript
describe('ÂõΩÈôÖÂåñÊµãËØï - Â¢ûÂº∫Áâà', () => {
  test('ÊâÄÊúâÈ°µÈù¢ÊîØÊåÅ‰∏≠Ëã±ÊñáÂàáÊç¢', async () => {
    const pages = ['/zh', '/en', '/zh/natural-therapies', '/en/natural-therapies'];
    
    for (const page of pages) {
      const response = await fetch(`http://localhost:3000${page}`);
      expect(response.status).toBe(200);
      
      const html = await response.text();
      expect(html).not.toMatch(/locale === 'zh'/);
      expect(html).not.toMatch(/[\u4e00-\u9fff].*[\u4e00-\u9fff]/);
    }
  });
  
  test('ÁøªËØëÈîÆÂÆåÊï¥ÊÄß', () => {
    const checker = new TranslationKeyChecker();
    const report = checker.checkCompleteness();
    
    expect(report.completeness).toBeGreaterThan(0.95);
    expect(report.missingKeys).toHaveLength(0);
  });
  
  // üÜï URLÈÖçÁΩÆÊµãËØï
  test('URLÈÖçÁΩÆÊ≠£Á°ÆÊÄß', () => {
    expect(URL_CONFIG.BASE_URL).toBe('https://www.periodhub.health');
    expect(URL_CONFIG.getUrl('/test')).toBe('https://www.periodhub.health/test');
    expect(URL_CONFIG.getCanonicalUrl('/test')).toBe('https://www.periodhub.health/test');
  });
  
  // üÜï ÊÄßËÉΩÊµãËØï
  test('ÊÄßËÉΩÂΩ±ÂìçËØÑ‰º∞', () => {
    const monitor = new PerformanceMonitor();
    const impact = monitor.assessImpact('test-file.tsx', []);
    expect(impact.score).toBeGreaterThan(0.8);
  });
});
```

#### 4.2 ÊåÅÁª≠ÁõëÊéßÊú∫Âà∂

**Â¢ûÂº∫ÁâàCI/CDÈõÜÊàê**
```yaml
# .github/workflows/i18n-check.yml - Â¢ûÂº∫Áâà
name: ÂõΩÈôÖÂåñÊ£ÄÊü• - Â¢ûÂº∫Áâà

on: [push, pull_request]

jobs:
  i18n-check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      
      - name: ÂÆâË£Ö‰æùËµñ
        run: npm install
      
      - name: Ê£ÄÊü•Á°¨ÁºñÁ†ÅURL
        run: npm run hardcode:detect
      
      - name: Ê£ÄÊü•Á°¨ÁºñÁ†ÅÊñáÊú¨
        run: npm run hardcode:text:detect
      
      - name: Ê£ÄÊü•ÁøªËØëÈîÆÂÆåÊï¥ÊÄß
        run: npm run hardcode:keys:check
      
      - name: Ëá™Âä®‰øÆÂ§çÁ°¨ÁºñÁ†Å
        run: npm run hardcode:fix
        continue-on-error: true
      
      - name: È™åËØÅ‰øÆÂ§çÁªìÊûú
        run: npm run hardcode:verify
      
      - name: ÊûÑÂª∫ÊµãËØï
        run: npm run build
      
      - name: ÊÄßËÉΩÊµãËØï
        run: npm run test:performance
```

## üìã ÂÆûÊñΩÊó∂Èó¥Ë°®

### Week 1: È¢ÑÈò≤Êú∫Âà∂Âª∫ËÆæ
- [x] Âà∂ÂÆöÂºÄÂèëËßÑËåÉÂíåÂëΩÂêçÊ†áÂáÜ
- [x] ÂàõÂª∫È°µÈù¢ÂíåÁªÑ‰ª∂Ê®°ÊùøÁîüÊàêÂô®
- [x] ËÆæÁΩÆPre-commit Hook
- [x] Âª∫Á´ã‰ª£Á†ÅÂÆ°Êü•ÊµÅÁ®ã
- [x] **üÜï ÂàõÂª∫URLÈÖçÁΩÆ‰∏≠ÂøÉ**

### Week 2: Ê£ÄÊµãÊú∫Âà∂Âª∫ËÆæ
- [x] ÂºÄÂèëÊô∫ËÉΩÊ£ÄÊµãÂ∑•ÂÖ∑
- [x] ÂÆûÁé∞ÂÆûÊó∂ÁõëÊéßÁ≥ªÁªü
- [x] ÈõÜÊàêCI/CDÊ£ÄÊü•
- [x] Âª∫Á´ãÊä•ÂëäÁîüÊàêÊú∫Âà∂
- [x] **üÜï Â¢ûÂº∫Ê£ÄÊµãÁ≤æÂ∫¶**

### Week 3-4: ‰øÆÂ§çÊú∫Âà∂Âª∫ËÆæ
- [x] ÂºÄÂèëÂÆâÂÖ®‰øÆÂ§çÂ∑•ÂÖ∑
- [x] ÂÆûÊñΩÂàÜÈò∂ÊÆµÊâπÈáè‰øÆÂ§ç
- [x] Âª∫Á´ãË¥®ÈáèÈ™åËØÅÊµÅÁ®ã
- [x] ÂÆåÂñÑÂõûÊªöÊú∫Âà∂
- [x] **üÜï Êô∫ËÉΩ‰øÆÂ§çÂª∫ËÆÆ**

### Week 5: Ë¥®Èáè‰øùËØÅ
- [x] ÂÖ®Èù¢ÊµãËØïÈ™åËØÅ
- [x] ÊÄßËÉΩÂΩ±ÂìçËØÑ‰º∞
- [x] Áî®Êà∑‰ΩìÈ™åÊµãËØï
- [x] ÊñáÊ°£ÂíåÂüπËÆ≠
- [x] **üÜï Âõ¢ÈòüÂçè‰ΩúÂäüËÉΩ**

## üéØ È¢ÑÊúüÊïàÊûú

### ÈáèÂåñÊåáÊ†á
- **Á°¨ÁºñÁ†ÅÊï∞Èáè**: 2000+ ‚Üí 0
- **ÁøªËØëÈîÆÂÆåÊï¥ÊÄß**: 60% ‚Üí 95%+
- **È°µÈù¢Âä†ËΩΩÈÄüÂ∫¶**: ÊèêÂçá15-20%
- **Áª¥Êä§ÊàêÊú¨**: Èôç‰Ωé60-70%
- **Êñ∞ËØ≠Ë®ÄÊîØÊåÅÊó∂Èó¥**: 2Âë® ‚Üí 2Â§©
- **üÜï Ê£ÄÊµãÁ≤æÂ∫¶**: ÊèêÂçá30%
- **üÜï ‰øÆÂ§çÊàêÂäüÁéá**: 95%+

### Ë¥®ÈáèÊèêÂçá
- **ÂÆåÂÖ®‰∏ÄËá¥ÁöÑÂ§öËØ≠Ë®Ä‰ΩìÈ™å**
- **‰∏ì‰∏öÂáÜÁ°ÆÁöÑÂåªÁñóÊúØËØ≠ÁøªËØë**
- **ÂìçÂ∫îÂºèËÆæËÆ°ÂÆåÁæéÈÄÇÈÖç**
- **ÂèØÁª¥Êä§ÁöÑ‰ª£Á†ÅÊû∂ÊûÑ**
- **üÜï Áªü‰∏ÄÁöÑURLÁÆ°ÁêÜ**
- **üÜï Êô∫ËÉΩÂåñÁöÑ‰øÆÂ§çÂª∫ËÆÆ**

## ‚ö†Ô∏è È£éÈô©ÊéßÂà∂

### ÊäÄÊúØÈ£éÈô©
- **ÊûÑÂª∫Â§±Ë¥•**: ÂàÜÈò∂ÊÆµÈÉ®ÁΩ≤ÔºåÊØèÊ≠•È™åËØÅ
- **ÊÄßËÉΩÂΩ±Âìç**: ÁõëÊéßbundleÂ§ßÂ∞èÂíåÂä†ËΩΩÊó∂Èó¥
- **ÂÖºÂÆπÊÄßÈóÆÈ¢ò**: ‰øùÁïôÂõûÊªöÊú∫Âà∂
- **üÜï ‰øÆÂ§çÈîôËØØ**: Ëá™Âä®ÂõûÊªöÂíåÈ™åËØÅÊú∫Âà∂**

### ‰∏öÂä°È£éÈô©
- **ÁøªËØëÂáÜÁ°ÆÊÄß**: ÂåªÁñóÂÜÖÂÆπÈúÄ‰∏ì‰∏öÂÆ°Ê†∏
- **Áî®Êà∑‰ΩìÈ™å**: Ê∏êËøõÂºèÂèëÂ∏ÉÔºåÊî∂ÈõÜÂèçÈ¶à
- **SEOÂΩ±Âìç**: ÁõëÊéßÊêúÁ¥¢ÂºïÊìéÁ¥¢ÂºïÊÉÖÂÜµ
- **üÜï Âõ¢ÈòüÂçè‰Ωú**: Âª∫Á´ãÂüπËÆ≠ÂíåÊñáÊ°£‰ΩìÁ≥ª**

## üöÄ ‰ΩøÁî®ÊåáÂçó

### Á´ãÂç≥ÂºÄÂßã
```bash
# 1. Ê£ÄÊµãÁ°¨ÁºñÁ†ÅÈóÆÈ¢ò
npm run hardcode:detect

# 2. Ëá™Âä®‰øÆÂ§çÁ°¨ÁºñÁ†Å
npm run hardcode:fix

# 3. È™åËØÅ‰øÆÂ§çÁªìÊûú
npm run hardcode:verify

# 4. Ê£ÄÊü•ÁøªËØëÈîÆÂÆåÊï¥ÊÄß
npm run hardcode:keys:check
```

### ÂºÄÂèëÊñ∞ÂäüËÉΩÊó∂
1. **‰ΩøÁî®URLÈÖçÁΩÆ** - ‰ªé `lib/url-config.ts` Ëé∑ÂèñURL
2. **ËøêË°åÊ£ÄÊµã** - `npm run hardcode:detect`
3. **ÂÆâÂÖ®‰øÆÂ§ç** - `npm run hardcode:fix`
4. **Êèê‰∫§‰ª£Á†Å** - GitÈí©Â≠êËá™Âä®È™åËØÅ

### ÂèëÁé∞Á°¨ÁºñÁ†ÅÊó∂
1. **Á´ãÂç≥ÂÅúÊ≠¢** - ‰∏çË¶ÅÁªßÁª≠ÂºÄÂèë
2. **ËøêË°åÊ£ÄÊµã** - Á°ÆËÆ§ÈóÆÈ¢òËåÉÂõ¥
3. **ÂÆâÂÖ®‰øÆÂ§ç** - ‰ΩøÁî®Ëá™Âä®ÂåñËÑöÊú¨
4. **È™åËØÅÁªìÊûú** - Á°Æ‰øùÊ≤°ÊúâÊñ∞Á°¨ÁºñÁ†Å
5. **ÁªßÁª≠ÂºÄÂèë** - ‰ΩøÁî®Ê≠£Á°ÆÈÖçÁΩÆ

## üéâ ÊÄªÁªì

ËøôÂ•óÂ¢ûÂº∫ÁâàÁ°¨ÁºñÁ†ÅÈ¢ÑÈò≤ÂíåËß£ÂÜ≥Êú∫Âà∂Âü∫‰∫éÈ°πÁõÆÂÆûÈôÖÁªèÈ™åÔºåÈááÁî®‰∏âÂ±ÇÈò≤Êä§‰ΩìÁ≥ªÔºå‰ªéÈ¢ÑÈò≤„ÄÅÊ£ÄÊµã„ÄÅ‰øÆÂ§ç‰∏â‰∏™Áª¥Â∫¶ÂÖ®Èù¢Ëß£ÂÜ≥Á°¨ÁºñÁ†ÅÈóÆÈ¢ò„ÄÇÈÄöËøáÁ≥ªÁªüÊÄßÁöÑÂ∑•ÂÖ∑Âª∫ËÆæÂíåÊµÅÁ®ã‰ºòÂåñÔºåÁ°Æ‰øùÈ°πÁõÆÈïøÊúüÁöÑÂèØÁª¥Êä§ÊÄßÂíåÂõΩÈôÖÂåñË¥®Èáè„ÄÇ

**Ê†∏ÂøÉ‰ºòÂäø**Ôºö
1. **È¢ÑÈò≤‰∏∫‰∏ª**Ôºö‰ªéÊ∫êÂ§¥Èò≤Ê≠¢Á°¨ÁºñÁ†Å‰∫ßÁîü
2. **Êô∫ËÉΩÊ£ÄÊµã**ÔºöËá™Âä®ÂåñÂèëÁé∞Âíå‰øÆÂ§çÈóÆÈ¢ò
3. **Ë¥®Èáè‰øùËØÅ**ÔºöÁ°Æ‰øù‰øÆÂ§çË¥®ÈáèÂíåÁî®Êà∑‰ΩìÈ™å
4. **ÊåÅÁª≠ÊîπËøõ**ÔºöÂª∫Á´ãÈïøÊúüÁõëÊéßÂíå‰ºòÂåñÊú∫Âà∂
5. **üÜï Êô∫ËÉΩÂª∫ËÆÆ**ÔºöÊèê‰æõ‰∏ä‰∏ãÊñáÁõ∏ÂÖ≥ÁöÑ‰øÆÂ§çÂª∫ËÆÆ
6. **üÜï ÂÆâÂÖ®‰øÆÂ§ç**ÔºöËá™Âä®ÂõûÊªöÂíåÈ™åËØÅÊú∫Âà∂
7. **üÜï Âõ¢ÈòüÂçè‰Ωú**ÔºöÂÆåÊï¥ÁöÑÂüπËÆ≠ÂíåÊñáÊ°£‰ΩìÁ≥ª

ÈÄöËøáËøôÂ•óÂ¢ûÂº∫ÁâàÊú∫Âà∂ÔºåÈ°πÁõÆÂ∞ÜÂΩªÂ∫ïËß£ÂÜ≥Á°¨ÁºñÁ†ÅÈóÆÈ¢òÔºåÂª∫Á´ãÂèØÊåÅÁª≠ÁöÑÂõΩÈôÖÂåñÁÆ°ÁêÜ‰ΩìÁ≥ªÔºÅ
