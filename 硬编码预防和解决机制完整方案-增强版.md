# ğŸ›¡ï¸ ç¡¬ç¼–ç é¢„é˜²å’Œè§£å†³æœºåˆ¶å®Œæ•´æ–¹æ¡ˆ - å¢å¼ºç‰ˆ

åŸºäºå¯¹é¡¹ç›®å›½é™…åŒ–ç¡¬ç¼–ç ä¿®å¤æ–‡æ¡£çš„æ·±å…¥å­¦ä¹ å’Œåˆ†æï¼Œåˆ¶å®šè¿™å¥—å®Œæ•´çš„ç¡¬ç¼–ç é¢„é˜²å’Œè§£å†³æœºåˆ¶ï¼Œå¹¶æ•´åˆäº†ç»†èŠ‚ä¼˜åŒ–å»ºè®®ã€‚

## ğŸ“Š é—®é¢˜ç°çŠ¶åˆ†æ

### å·²è§£å†³çš„é—®é¢˜
- âœ… é…ç½®å†²çªï¼šnext-intl APIç‰ˆæœ¬å†²çªå·²ä¿®å¤
- âœ… è·¯å¾„é”™è¯¯ï¼šé…ç½®æ–‡ä»¶è·¯å¾„é—®é¢˜å·²è§£å†³
- âœ… æ„å»ºè­¦å‘Šï¼šæŠ€æœ¯é…ç½®å±‚é¢é—®é¢˜å·²æ¸…ç†

### å½“å‰æ ¸å¿ƒé—®é¢˜
- âŒ **ç¡¬ç¼–ç æ–‡æœ¬**ï¼š2000+å¤„ç¡¬ç¼–ç å­—ç¬¦ä¸²æ•£å¸ƒåœ¨ä»£ç ä¸­
- âŒ **ç¿»è¯‘é”®ç¼ºå¤±**ï¼šå¤§é‡ç¡¬ç¼–ç æ–‡æœ¬ç¼ºå°‘å¯¹åº”çš„ç¿»è¯‘é”®
- âŒ **æ¶æ„ä¸å®Œæ•´**ï¼šç¼ºä¹ç³»ç»Ÿæ€§çš„å›½é™…åŒ–æ¶æ„è®¾è®¡
- âŒ **æµç¨‹ç¼ºå¤±**ï¼šæ²¡æœ‰ç¡¬ç¼–ç é¢„é˜²å’Œæ£€æµ‹æœºåˆ¶

## ğŸ¯ è§£å†³æ–¹æ¡ˆæ¶æ„

### ä¸‰å±‚é˜²æŠ¤ä½“ç³»

#### ç¬¬ä¸€å±‚ï¼šé¢„é˜²æœºåˆ¶ï¼ˆPreventionï¼‰
- å¼€å‘è§„èŒƒåˆ¶å®š
- æ¨¡æ¿å’Œå·¥å…·æ”¯æŒ
- ä»£ç å®¡æŸ¥æµç¨‹
- **ğŸ†• URLé…ç½®ä¸­å¿ƒ**

#### ç¬¬äºŒå±‚ï¼šæ£€æµ‹æœºåˆ¶ï¼ˆDetectionï¼‰
- è‡ªåŠ¨åŒ–æ£€æµ‹å·¥å…·
- CI/CDé›†æˆæ£€æŸ¥
- å®æ—¶ç›‘æ§ç³»ç»Ÿ
- **ğŸ†• æ™ºèƒ½æ£€æµ‹ç²¾åº¦ä¼˜åŒ–**

#### ç¬¬ä¸‰å±‚ï¼šä¿®å¤æœºåˆ¶ï¼ˆResolutionï¼‰
- æ™ºèƒ½ä¿®å¤å·¥å…·
- æ‰¹é‡å¤„ç†ç­–ç•¥
- è´¨é‡éªŒè¯æµç¨‹
- **ğŸ†• å®‰å…¨ä¿®å¤å’Œå›æ»šæœºåˆ¶**

## ğŸ› ï¸ å…·ä½“å®æ–½æ–¹æ¡ˆ

### Phase 1: é¢„é˜²æœºåˆ¶å»ºè®¾ï¼ˆ1å‘¨ï¼‰

#### 1.1 å¼€å‘è§„èŒƒåˆ¶å®š

**ç¿»è¯‘é”®å‘½åè§„èŒƒ**
```typescript
// æ ‡å‡†å‘½åç»“æ„
const namingConventions = {
  // é¡µé¢çº§ï¼špages.[pageName].[section].[item]
  pages: {
    naturalTherapies: 'pages.naturalTherapies.hero.title',
    healthGuide: 'pages.healthGuide.sections.pain.title'
  },
  
  // ç»„ä»¶çº§ï¼šcomponents.[componentName].[element]
  components: {
    button: 'components.button.submit',
    modal: 'components.modal.title'
  },
  
  // é€šç”¨çº§ï¼šcommon.[category].[item]
  common: {
    actions: 'common.actions.save',
    messages: 'common.messages.loading'
  },
  
  // åŒ»å­¦çº§ï¼šmedical.[category].[term]
  medical: {
    symptoms: 'medical.symptoms.cramping',
    treatments: 'medical.treatments.heatTherapy'
  }
};
```

**ç¡¬ç¼–ç ç¦æ­¢è§„åˆ™**
```typescript
// ä¸¥æ ¼ç¦æ­¢çš„ç¡¬ç¼–ç æ¨¡å¼
const forbiddenPatterns = [
  // æ¡ä»¶ç¡¬ç¼–ç 
  /locale === 'zh' \? '([^']+)' : '([^']+)'/g,
  /locale === 'zh' \? "([^"]+)" : "([^"]+)"/g,
  
  // ç›´æ¥å­—ç¬¦ä¸²ç¡¬ç¼–ç 
  /'[\u4e00-\u9fff]+'/g,  // ä¸­æ–‡å­—ç¬¦ä¸²
  /"[\\u4e00-\\u9fff]+"/g,  // ä¸­æ–‡å­—ç¬¦ä¸²
  
  // ç§‘å­¦å‚æ•°ç¡¬ç¼–ç 
  /temperature.*[0-9]+.*Â°[CF]/g,
  /duration.*[0-9]+.*minute/g,
  /dosage.*[0-9]+.*mg/g,
  
  // ğŸ†• ç¡¬ç¼–ç URLæ£€æµ‹
  /https:\/\/periodhub\.health(?!\/)/g,  // æ’é™¤è·¯å¾„
  /`https:\/\/periodhub\.health\$\{/g,   // æ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„ç¡¬ç¼–ç 
];
```

#### 1.2 URLé…ç½®ä¸­å¿ƒ ğŸ†•

**ç»Ÿä¸€URLç®¡ç†**
```typescript
// lib/url-config.ts - å¢å¼ºç‰ˆ
export const URL_CONFIG = {
  BASE_URL: process.env.NEXT_PUBLIC_BASE_URL || 'https://www.periodhub.health',
  
  // åŸºç¡€URLç”Ÿæˆ
  getUrl: (path: string = '') => {
    const cleanPath = path.startsWith('/') ? path : `/${path}`;
    return `${URL_CONFIG.BASE_URL}${cleanPath}`;
  },
  
  // è§„èŒƒURLç”Ÿæˆ
  getCanonicalUrl: (path: string) => {
    return URL_CONFIG.getUrl(path);
  },
  
  // Open Graphå›¾ç‰‡URLç”Ÿæˆ
  getOgImageUrl: (path: string) => {
    return URL_CONFIG.getUrl(`/images/og${path}`);
  },
  
  // APIç«¯ç‚¹URLç”Ÿæˆ
  getApiUrl: (endpoint: string) => {
    return URL_CONFIG.getUrl(`/api${endpoint}`);
  },
  
  // é™æ€èµ„æºURLç”Ÿæˆ
  getStaticUrl: (path: string) => {
    return URL_CONFIG.getUrl(`/static${path}`);
  }
};

// æ™ºèƒ½ä¿®å¤å»ºè®®ç”Ÿæˆå™¨
class SmartFixSuggester {
  suggestFix(match: string, context: string): string {
    if (context.includes('canonical')) {
      return `URL_CONFIG.getCanonicalUrl('${this.extractPath(match)}')`;
    }
    if (context.includes('og:image')) {
      return `URL_CONFIG.getOgImageUrl('${this.extractPath(match)}')`;
    }
    if (context.includes('api')) {
      return `URL_CONFIG.getApiUrl('${this.extractPath(match)}')`;
    }
    return `URL_CONFIG.getUrl('${this.extractPath(match)}')`;
  }
  
  private extractPath(url: string): string {
    return url.replace(/https:\/\/[^\/]+/, '');
  }
}
```

#### 1.3 å¼€å‘å·¥å…·æ”¯æŒ

**é¡µé¢æ¨¡æ¿ç”Ÿæˆå™¨**
```typescript
// è‡ªåŠ¨ç”Ÿæˆå›½é™…åŒ–é¡µé¢æ¨¡æ¿
const createI18nPageTemplate = (pageName: string) => {
  return {
    // é¡µé¢å…ƒæ•°æ®æ¨¡æ¿
    metadata: {
      title: `{{${pageName}.meta.title}}`,
      description: `{{${pageName}.meta.description}}`,
      keywords: `{{${pageName}.meta.keywords}}`,
      // ğŸ†• è‡ªåŠ¨ç”Ÿæˆè§„èŒƒURL
      canonical: `URL_CONFIG.getCanonicalUrl('/${pageName}')`,
      ogImage: `URL_CONFIG.getOgImageUrl('/${pageName}.jpg')`
    },
    
    // é¡µé¢å†…å®¹æ¨¡æ¿
    content: {
      hero: {
        title: `{{${pageName}.hero.title}}`,
        subtitle: `{{${pageName}.hero.subtitle}}`,
        description: `{{${pageName}.hero.description}}`
      },
      
      sections: {
        // åŠ¨æ€sectionæ¨¡æ¿
        [sectionName]: {
          title: `{{${pageName}.sections.${sectionName}.title}}`,
          description: `{{${pageName}.sections.${sectionName}.description}}`
        }
      }
    }
  };
};
```

#### 1.4 ä»£ç å®¡æŸ¥æµç¨‹

**å¢å¼ºç‰ˆPre-commit Hook**
```bash
#!/bin/bash
# .git/hooks/pre-commit - å¢å¼ºç‰ˆ

echo "ğŸ” æ£€æŸ¥ç¡¬ç¼–ç ..."

# è¿è¡Œç¡¬ç¼–ç æ£€æµ‹
if ! node scripts/detect-hardcoded-urls.js --enhanced; then
    echo "âŒ å‘ç°ç¡¬ç¼–ç URLï¼Œæäº¤è¢«é˜»æ­¢"
    echo "ğŸ’¡ è¿è¡Œ 'npm run hardcode:fix' è‡ªåŠ¨ä¿®å¤"
    exit 1
fi

if ! node scripts/detect-hardcoded-text.js; then
    echo "âŒ å‘ç°ç¡¬ç¼–ç æ–‡æœ¬ï¼Œæäº¤è¢«é˜»æ­¢"
    echo "ğŸ’¡ è¿è¡Œ 'npm run hardcode:fix' è‡ªåŠ¨ä¿®å¤"
    exit 1
fi

# ğŸ†• æ£€æŸ¥ç¿»è¯‘é”®å®Œæ•´æ€§
if ! node scripts/check-translation-keys.js; then
    echo "âŒ ç¿»è¯‘é”®ä¸å®Œæ•´ï¼Œæäº¤è¢«é˜»æ­¢"
    exit 1
fi

echo "âœ… ç¡¬ç¼–ç æ£€æŸ¥é€šè¿‡"
exit 0
```

### Phase 2: æ£€æµ‹æœºåˆ¶å»ºè®¾ï¼ˆ1å‘¨ï¼‰

#### 2.1 æ™ºèƒ½æ£€æµ‹å·¥å…·

**å¢å¼ºç‰ˆç¡¬ç¼–ç æ–‡æœ¬æ£€æµ‹å™¨**
```typescript
class EnhancedHardcodedTextDetector {
  private patterns = [
    // æ¡ä»¶ç¡¬ç¼–ç æ¨¡å¼
    /locale === 'zh' \? '([^']+)' : '([^']+)'/g,
    /locale === 'zh' \? "([^"]+)" : "([^"]+)"/g,
    
    // ç›´æ¥ä¸­æ–‡å­—ç¬¦ä¸²
    /'[\u4e00-\u9fff]+'/g,
    /"[\u4e00-\u9fff]+"/g,
    
    // ç§‘å­¦å‚æ•°ç¡¬ç¼–ç 
    /temperature.*[0-9]+.*Â°[CF]/g,
    /duration.*[0-9]+.*minute/g,
    /dosage.*[0-9]+.*mg/g,
    
    // ğŸ†• å¢å¼ºURLæ£€æµ‹
    {
      pattern: /https:\/\/periodhub\.health(?!\/)/g,
      type: 'hardcoded-base-url',
      severity: 'high',
      description: 'ç¡¬ç¼–ç åŸºç¡€URL'
    },
    {
      pattern: /`https:\/\/periodhub\.health\$\{/g,
      type: 'template-hardcoded-url',
      severity: 'high',
      description: 'æ¨¡æ¿å­—ç¬¦ä¸²ä¸­çš„ç¡¬ç¼–ç URL'
    }
  ];
  
  // ğŸ†• å¢å¼ºæ£€æµ‹ç²¾åº¦
  detectInFile(filePath: string): HardcodeReport[] {
    try {
      const content = fs.readFileSync(filePath, 'utf8');
      const fileReports = [];
      
      this.patterns.forEach(rule => {
        const matches = content.matchAll(rule.pattern);
        for (const match of matches) {
          const report = {
            file: filePath,
            line: this.getLineNumber(content, match.index),
            match: match[0],
            type: rule.type || this.classifyHardcode(match[0]),
            severity: rule.severity || 'medium',
            description: rule.description || 'ç¡¬ç¼–ç å†…å®¹',
            suggestion: this.generateSmartSuggestion(match, rule.type, content)
          };
          
          fileReports.push(report);
        }
      });
      
      return fileReports;
    } catch (error) {
      log.error(`è¯»å–æ–‡ä»¶å¤±è´¥: ${filePath} - ${error.message}`);
      return [];
    }
  }
  
  // ğŸ†• æ™ºèƒ½ä¿®å¤å»ºè®®
  private generateSmartSuggestion(match: RegExpMatchArray, type: string, context: string): string {
    const [fullMatch, ...groups] = match;
    
    switch (type) {
      case 'hardcoded-base-url':
        return `å»ºè®®æ›¿æ¢ä¸º: URL_CONFIG.getUrl('${this.extractPath(fullMatch)}')`;
      case 'template-hardcoded-url':
        return `å»ºè®®æ›¿æ¢ä¸º: URL_CONFIG.getUrl(\`\${path}\`)`;
      case 'conditional-string':
        return `å»ºè®®æ›¿æ¢ä¸º: t('${this.generateKeySuggestion(groups[0])}')`;
      case 'chinese-string':
        return `å»ºè®®æ›¿æ¢ä¸º: t('${this.generateKeySuggestion(groups[0])}')`;
      case 'scientific-param':
        return `å»ºè®®å°†ç§‘å­¦å‚æ•°ç§»åˆ°ç¿»è¯‘æ–‡ä»¶ä¸­ï¼Œæ”¯æŒå¤šè¯­è¨€å’Œå•ä½è½¬æ¢`;
      default:
        return `å»ºè®®ä½¿ç”¨ç¿»è¯‘é”®æˆ–URL_CONFIGæ›¿ä»£ç¡¬ç¼–ç `;
    }
  }
}
```

**ç¿»è¯‘é”®å®Œæ•´æ€§æ£€æŸ¥å™¨**
```typescript
class TranslationKeyChecker {
  // æ£€æŸ¥ç¿»è¯‘é”®æ˜¯å¦å®Œæ•´
  checkCompleteness(): CompletenessReport {
    const usedKeys = this.extractUsedKeys();
    const availableKeys = this.extractAvailableKeys();
    
    const missingKeys = [...usedKeys].filter(key => !availableKeys.has(key));
    const unusedKeys = [...availableKeys].filter(key => !usedKeys.has(key));
    
    return {
      totalUsed: usedKeys.size,
      totalAvailable: availableKeys.size,
      missingKeys,
      unusedKeys,
      completeness: (usedKeys.size - missingKeys.length) / usedKeys.size
    };
  }
  
  // ğŸ†• å¢å¼ºé”®æå–é€»è¾‘
  extractUsedKeys() {
    const files = this.getSourceFiles();
    
    files.forEach(file => {
      try {
        const content = fs.readFileSync(file, 'utf8');
        
        // åŒ¹é… t('key') æ¨¡å¼
        const tMatches = content.matchAll(/t\(['"`]([^'"`]+)['"`]\)/g);
        for (const match of tMatches) {
          this.usedKeys.add(match[1]);
        }
        
        // åŒ¹é… useTranslations('namespace') + t('key') æ¨¡å¼
        const namespaceMatches = content.matchAll(/useTranslations\(['"`]([^'"`]+)['"`]\)/g);
        for (const match of namespaceMatches) {
          const namespace = match[1];
          const tMatches = content.matchAll(/t\(['"`]([^'"`]+)['"`]\)/g);
          for (const tMatch of tMatches) {
            this.usedKeys.add(`${namespace}.${tMatch[1]}`);
          }
        }
        
        // ğŸ†• åŒ¹é…åŠ¨æ€é”®ç”Ÿæˆ
        const dynamicMatches = content.matchAll(/t\(`([^`]+)\$\{/g);
        for (const match of dynamicMatches) {
          this.usedKeys.add(match[1]);
        }
      } catch (error) {
        log.debug(`å¤„ç†æ–‡ä»¶å¤±è´¥: ${file} - ${error.message}`);
      }
    });
  }
}
```

#### 2.2 å®æ—¶ç›‘æ§ç³»ç»Ÿ

**å¢å¼ºç‰ˆæ–‡ä»¶ç›‘å¬å™¨**
```typescript
// æ–‡ä»¶ç›‘å¬å™¨ - å¢å¼ºç‰ˆ
class EnhancedFileWatcher {
  private watcher: chokidar.FSWatcher;
  private performanceMonitor: PerformanceMonitor;
  
  constructor() {
    this.watcher = chokidar.watch('app/**/*.{tsx,ts}', {
      ignored: /node_modules/,
      persistent: true
    });
    
    this.performanceMonitor = new PerformanceMonitor();
    
    this.watcher.on('change', (path) => {
      this.checkFileForHardcode(path);
    });
  }
  
  private async checkFileForHardcode(filePath: string) {
    const detector = new EnhancedHardcodedTextDetector();
    const reports = detector.detectInFile(filePath);
    
    if (reports.length > 0) {
      console.warn(`âš ï¸ å‘ç°ç¡¬ç¼–ç : ${filePath}`);
      reports.forEach(report => {
        console.warn(`  ç¬¬${report.line}è¡Œ: ${report.match}`);
        console.warn(`  å»ºè®®: ${report.suggestion}`);
      });
      
      // ğŸ†• æ€§èƒ½å½±å“è¯„ä¼°
      this.performanceMonitor.assessImpact(filePath, reports);
    }
  }
}

// ğŸ†• æ€§èƒ½ç›‘æ§å™¨
class PerformanceMonitor {
  assessImpact(filePath: string, reports: HardcodeReport[]) {
    // ç›‘æ§URL_CONFIGä½¿ç”¨é¢‘ç‡
    // æ£€æµ‹æ˜¯å¦æœ‰æ€§èƒ½é—®é¢˜
    // æä¾›ä¼˜åŒ–å»ºè®®
  }
}
```

### Phase 3: ä¿®å¤æœºåˆ¶å»ºè®¾ï¼ˆ2å‘¨ï¼‰

#### 3.1 æ™ºèƒ½ä¿®å¤å·¥å…·

**å¢å¼ºç‰ˆå®‰å…¨ä¿®å¤è„šæœ¬**
```typescript
class EnhancedSafeHardcodeFixer {
  // ä¿®å¤å•ä¸ªæ–‡ä»¶ - å¢å¼ºç‰ˆ
  async fixFile(filePath: string): Promise<FixResult> {
    try {
      // ğŸ†• åˆ›å»ºå¤‡ä»½
      await this.createBackup(filePath);
      
      // ğŸ†• éªŒè¯æ–‡ä»¶å¯è¯»æ€§
      await this.validateFile(filePath);
      
      const content = fs.readFileSync(filePath, 'utf-8');
      let newContent = content;
      let hasChanges = false;
      
      // åº”ç”¨ä¿®å¤è§„åˆ™
      const fixRules = this.getEnhancedFixRules();
      for (const rule of fixRules) {
        const matches = newContent.match(rule.pattern);
        if (matches) {
          newContent = newContent.replace(rule.pattern, rule.replacement);
          hasChanges = true;
        }
      }
      
      if (hasChanges) {
        // æ·»åŠ å¿…è¦çš„å¯¼å…¥
        if (!newContent.includes('URL_CONFIG')) {
          newContent = this.addUrlConfigImport(newContent);
        }
        if (!newContent.includes('useTranslations')) {
          newContent = this.addTranslationImport(newContent);
        }
        
        // å†™å…¥ä¿®å¤åçš„å†…å®¹
        fs.writeFileSync(filePath, newContent);
        
        // ğŸ†• éªŒè¯ä¿®å¤ç»“æœ
        await this.validateFix(filePath);
        
        return {
          success: true,
          changes: hasChanges,
          backup: `${filePath}.backup`
        };
      }
      
      return { success: true, changes: false };
    } catch (error) {
      // ğŸ†• è‡ªåŠ¨å›æ»š
      await this.rollback(filePath);
      throw new Error(`ä¿®å¤å¤±è´¥: ${error.message}`);
    }
  }
  
  // ğŸ†• å¢å¼ºä¿®å¤è§„åˆ™
  private getEnhancedFixRules() {
    return [
      {
        pattern: /locale === 'zh' \? '([^']+)' : '([^']+)'/g,
        replacement: "t('$1')",
        type: 'conditional-string'
      },
      {
        pattern: /'([\u4e00-\u9fff]+)'/g,
        replacement: "t('$1')",
        type: 'chinese-string'
      },
      {
        pattern: /https:\/\/periodhub\.health(?!\/)/g,
        replacement: "URL_CONFIG.BASE_URL",
        type: 'hardcoded-url'
      },
      {
        pattern: /https:\/\/www\.periodhub\.health/g,
        replacement: "URL_CONFIG.BASE_URL",
        type: 'hardcoded-www-url'
      }
    ];
  }
  
  // ğŸ†• è‡ªåŠ¨å›æ»šæœºåˆ¶
  private async rollback(filePath: string) {
    const backupFile = `${filePath}.backup`;
    if (fs.existsSync(backupFile)) {
      fs.copyFileSync(backupFile, filePath);
      fs.unlinkSync(backupFile);
      console.log(`âœ… å·²å›æ»š: ${filePath}`);
    }
  }
}
```

#### 3.2 æ‰¹é‡å¤„ç†ç­–ç•¥

**å¢å¼ºç‰ˆæ‰¹é‡å¤„ç†å™¨**
```typescript
class EnhancedBatchProcessor {
  // æŒ‰ä¼˜å…ˆçº§å¤„ç†æ–‡ä»¶ - å¢å¼ºç‰ˆ
  async processByPriority(): Promise<void> {
    const files = this.getFilesByPriority();
    const results = [];
    
    for (const file of files) {
      console.log(`å¤„ç†æ–‡ä»¶: ${file.path}`);
      
      try {
        const result = await this.fixFile(file.path);
        results.push({
          file: file.path,
          success: result.success,
          changes: result.changes
        });
        
        if (result.success) {
          console.log(`âœ… ä¿®å¤æˆåŠŸ: ${file.path}`);
        } else {
          console.log(`âŒ ä¿®å¤å¤±è´¥: ${file.path}`);
        }
      } catch (error) {
        console.error(`âŒ å¤„ç†é”™è¯¯: ${file.path}`, error);
        results.push({
          file: file.path,
          success: false,
          error: error.message
        });
      }
    }
    
    // ğŸ†• ç”Ÿæˆå¤„ç†æŠ¥å‘Š
    this.generateReport(results);
  }
  
  // ğŸ†• ç”Ÿæˆå¤„ç†æŠ¥å‘Š
  private generateReport(results: any[]) {
    const successCount = results.filter(r => r.success).length;
    const totalCount = results.length;
    
    console.log(`\nğŸ“Š æ‰¹é‡å¤„ç†æŠ¥å‘Š:`);
    console.log(`âœ… æˆåŠŸ: ${successCount}/${totalCount}`);
    console.log(`âŒ å¤±è´¥: ${totalCount - successCount}/${totalCount}`);
    
    // ä¿å­˜è¯¦ç»†æŠ¥å‘Š
    fs.writeFileSync('hardcode-fix-report.json', JSON.stringify(results, null, 2));
  }
}
```

### Phase 4: è´¨é‡ä¿è¯ï¼ˆ1å‘¨ï¼‰

#### 4.1 å…¨é¢æµ‹è¯•éªŒè¯

**å¢å¼ºç‰ˆå¤šè¯­è¨€æµ‹è¯•å¥—ä»¶**
```typescript
describe('å›½é™…åŒ–æµ‹è¯• - å¢å¼ºç‰ˆ', () => {
  test('æ‰€æœ‰é¡µé¢æ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢', async () => {
    const pages = ['/zh', '/en', '/zh/natural-therapies', '/en/natural-therapies'];
    
    for (const page of pages) {
      const response = await fetch(`http://localhost:3000${page}`);
      expect(response.status).toBe(200);
      
      const html = await response.text();
      expect(html).not.toMatch(/locale === 'zh'/);
      expect(html).not.toMatch(/[\u4e00-\u9fff].*[\u4e00-\u9fff]/);
    }
  });
  
  test('ç¿»è¯‘é”®å®Œæ•´æ€§', () => {
    const checker = new TranslationKeyChecker();
    const report = checker.checkCompleteness();
    
    expect(report.completeness).toBeGreaterThan(0.95);
    expect(report.missingKeys).toHaveLength(0);
  });
  
  // ğŸ†• URLé…ç½®æµ‹è¯•
  test('URLé…ç½®æ­£ç¡®æ€§', () => {
    expect(URL_CONFIG.BASE_URL).toBe('https://www.periodhub.health');
    expect(URL_CONFIG.getUrl('/test')).toBe('https://www.periodhub.health/test');
    expect(URL_CONFIG.getCanonicalUrl('/test')).toBe('https://www.periodhub.health/test');
  });
  
  // ğŸ†• æ€§èƒ½æµ‹è¯•
  test('æ€§èƒ½å½±å“è¯„ä¼°', () => {
    const monitor = new PerformanceMonitor();
    const impact = monitor.assessImpact('test-file.tsx', []);
    expect(impact.score).toBeGreaterThan(0.8);
  });
});
```

#### 4.2 æŒç»­ç›‘æ§æœºåˆ¶

**å¢å¼ºç‰ˆCI/CDé›†æˆ**
```yaml
# .github/workflows/i18n-check.yml - å¢å¼ºç‰ˆ
name: å›½é™…åŒ–æ£€æŸ¥ - å¢å¼ºç‰ˆ

on: [push, pull_request]

jobs:
  i18n-check:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      
      - name: å®‰è£…ä¾èµ–
        run: npm install
      
      - name: æ£€æŸ¥ç¡¬ç¼–ç URL
        run: npm run hardcode:detect
      
      - name: æ£€æŸ¥ç¡¬ç¼–ç æ–‡æœ¬
        run: npm run hardcode:text:detect
      
      - name: æ£€æŸ¥ç¿»è¯‘é”®å®Œæ•´æ€§
        run: npm run hardcode:keys:check
      
      - name: è‡ªåŠ¨ä¿®å¤ç¡¬ç¼–ç 
        run: npm run hardcode:fix
        continue-on-error: true
      
      - name: éªŒè¯ä¿®å¤ç»“æœ
        run: npm run hardcode:verify
      
      - name: æ„å»ºæµ‹è¯•
        run: npm run build
      
      - name: æ€§èƒ½æµ‹è¯•
        run: npm run test:performance
```

## ğŸ“‹ å®æ–½æ—¶é—´è¡¨

### Week 1: é¢„é˜²æœºåˆ¶å»ºè®¾
- [x] åˆ¶å®šå¼€å‘è§„èŒƒå’Œå‘½åæ ‡å‡†
- [x] åˆ›å»ºé¡µé¢å’Œç»„ä»¶æ¨¡æ¿ç”Ÿæˆå™¨
- [x] è®¾ç½®Pre-commit Hook
- [x] å»ºç«‹ä»£ç å®¡æŸ¥æµç¨‹
- [x] **ğŸ†• åˆ›å»ºURLé…ç½®ä¸­å¿ƒ**

### Week 2: æ£€æµ‹æœºåˆ¶å»ºè®¾
- [x] å¼€å‘æ™ºèƒ½æ£€æµ‹å·¥å…·
- [x] å®ç°å®æ—¶ç›‘æ§ç³»ç»Ÿ
- [x] é›†æˆCI/CDæ£€æŸ¥
- [x] å»ºç«‹æŠ¥å‘Šç”Ÿæˆæœºåˆ¶
- [x] **ğŸ†• å¢å¼ºæ£€æµ‹ç²¾åº¦**

### Week 3-4: ä¿®å¤æœºåˆ¶å»ºè®¾
- [x] å¼€å‘å®‰å…¨ä¿®å¤å·¥å…·
- [x] å®æ–½åˆ†é˜¶æ®µæ‰¹é‡ä¿®å¤
- [x] å»ºç«‹è´¨é‡éªŒè¯æµç¨‹
- [x] å®Œå–„å›æ»šæœºåˆ¶
- [x] **ğŸ†• æ™ºèƒ½ä¿®å¤å»ºè®®**

### Week 5: è´¨é‡ä¿è¯
- [x] å…¨é¢æµ‹è¯•éªŒè¯
- [x] æ€§èƒ½å½±å“è¯„ä¼°
- [x] ç”¨æˆ·ä½“éªŒæµ‹è¯•
- [x] æ–‡æ¡£å’ŒåŸ¹è®­
- [x] **ğŸ†• å›¢é˜Ÿåä½œåŠŸèƒ½**

## ğŸ¯ é¢„æœŸæ•ˆæœ

### é‡åŒ–æŒ‡æ ‡
- **ç¡¬ç¼–ç æ•°é‡**: 2000+ â†’ 0
- **ç¿»è¯‘é”®å®Œæ•´æ€§**: 60% â†’ 95%+
- **é¡µé¢åŠ è½½é€Ÿåº¦**: æå‡15-20%
- **ç»´æŠ¤æˆæœ¬**: é™ä½60-70%
- **æ–°è¯­è¨€æ”¯æŒæ—¶é—´**: 2å‘¨ â†’ 2å¤©
- **ğŸ†• æ£€æµ‹ç²¾åº¦**: æå‡30%
- **ğŸ†• ä¿®å¤æˆåŠŸç‡**: 95%+

### è´¨é‡æå‡
- **å®Œå…¨ä¸€è‡´çš„å¤šè¯­è¨€ä½“éªŒ**
- **ä¸“ä¸šå‡†ç¡®çš„åŒ»ç–—æœ¯è¯­ç¿»è¯‘**
- **å“åº”å¼è®¾è®¡å®Œç¾é€‚é…**
- **å¯ç»´æŠ¤çš„ä»£ç æ¶æ„**
- **ğŸ†• ç»Ÿä¸€çš„URLç®¡ç†**
- **ğŸ†• æ™ºèƒ½åŒ–çš„ä¿®å¤å»ºè®®**

## âš ï¸ é£é™©æ§åˆ¶

### æŠ€æœ¯é£é™©
- **æ„å»ºå¤±è´¥**: åˆ†é˜¶æ®µéƒ¨ç½²ï¼Œæ¯æ­¥éªŒè¯
- **æ€§èƒ½å½±å“**: ç›‘æ§bundleå¤§å°å’ŒåŠ è½½æ—¶é—´
- **å…¼å®¹æ€§é—®é¢˜**: ä¿ç•™å›æ»šæœºåˆ¶
- **ğŸ†• ä¿®å¤é”™è¯¯**: è‡ªåŠ¨å›æ»šå’ŒéªŒè¯æœºåˆ¶**

### ä¸šåŠ¡é£é™©
- **ç¿»è¯‘å‡†ç¡®æ€§**: åŒ»ç–—å†…å®¹éœ€ä¸“ä¸šå®¡æ ¸
- **ç”¨æˆ·ä½“éªŒ**: æ¸è¿›å¼å‘å¸ƒï¼Œæ”¶é›†åé¦ˆ
- **SEOå½±å“**: ç›‘æ§æœç´¢å¼•æ“ç´¢å¼•æƒ…å†µ
- **ğŸ†• å›¢é˜Ÿåä½œ**: å»ºç«‹åŸ¹è®­å’Œæ–‡æ¡£ä½“ç³»**

## ğŸš€ ä½¿ç”¨æŒ‡å—

### ç«‹å³å¼€å§‹
```bash
# 1. æ£€æµ‹ç¡¬ç¼–ç é—®é¢˜
npm run hardcode:detect

# 2. è‡ªåŠ¨ä¿®å¤ç¡¬ç¼–ç 
npm run hardcode:fix

# 3. éªŒè¯ä¿®å¤ç»“æœ
npm run hardcode:verify

# 4. æ£€æŸ¥ç¿»è¯‘é”®å®Œæ•´æ€§
npm run hardcode:keys:check
```

### å¼€å‘æ–°åŠŸèƒ½æ—¶
1. **ä½¿ç”¨URLé…ç½®** - ä» `lib/url-config.ts` è·å–URL
2. **è¿è¡Œæ£€æµ‹** - `npm run hardcode:detect`
3. **å®‰å…¨ä¿®å¤** - `npm run hardcode:fix`
4. **æäº¤ä»£ç ** - Gité’©å­è‡ªåŠ¨éªŒè¯

### å‘ç°ç¡¬ç¼–ç æ—¶
1. **ç«‹å³åœæ­¢** - ä¸è¦ç»§ç»­å¼€å‘
2. **è¿è¡Œæ£€æµ‹** - ç¡®è®¤é—®é¢˜èŒƒå›´
3. **å®‰å…¨ä¿®å¤** - ä½¿ç”¨è‡ªåŠ¨åŒ–è„šæœ¬
4. **éªŒè¯ç»“æœ** - ç¡®ä¿æ²¡æœ‰æ–°ç¡¬ç¼–ç 
5. **ç»§ç»­å¼€å‘** - ä½¿ç”¨æ­£ç¡®é…ç½®

## ğŸ‰ æ€»ç»“

è¿™å¥—å¢å¼ºç‰ˆç¡¬ç¼–ç é¢„é˜²å’Œè§£å†³æœºåˆ¶åŸºäºé¡¹ç›®å®é™…ç»éªŒï¼Œé‡‡ç”¨ä¸‰å±‚é˜²æŠ¤ä½“ç³»ï¼Œä»é¢„é˜²ã€æ£€æµ‹ã€ä¿®å¤ä¸‰ä¸ªç»´åº¦å…¨é¢è§£å†³ç¡¬ç¼–ç é—®é¢˜ã€‚é€šè¿‡ç³»ç»Ÿæ€§çš„å·¥å…·å»ºè®¾å’Œæµç¨‹ä¼˜åŒ–ï¼Œç¡®ä¿é¡¹ç›®é•¿æœŸçš„å¯ç»´æŠ¤æ€§å’Œå›½é™…åŒ–è´¨é‡ã€‚

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š
1. **é¢„é˜²ä¸ºä¸»**ï¼šä»æºå¤´é˜²æ­¢ç¡¬ç¼–ç äº§ç”Ÿ
2. **æ™ºèƒ½æ£€æµ‹**ï¼šè‡ªåŠ¨åŒ–å‘ç°å’Œä¿®å¤é—®é¢˜
3. **è´¨é‡ä¿è¯**ï¼šç¡®ä¿ä¿®å¤è´¨é‡å’Œç”¨æˆ·ä½“éªŒ
4. **æŒç»­æ”¹è¿›**ï¼šå»ºç«‹é•¿æœŸç›‘æ§å’Œä¼˜åŒ–æœºåˆ¶
5. **ğŸ†• æ™ºèƒ½å»ºè®®**ï¼šæä¾›ä¸Šä¸‹æ–‡ç›¸å…³çš„ä¿®å¤å»ºè®®
6. **ğŸ†• å®‰å…¨ä¿®å¤**ï¼šè‡ªåŠ¨å›æ»šå’ŒéªŒè¯æœºåˆ¶
7. **ğŸ†• å›¢é˜Ÿåä½œ**ï¼šå®Œæ•´çš„åŸ¹è®­å’Œæ–‡æ¡£ä½“ç³»

é€šè¿‡è¿™å¥—å¢å¼ºç‰ˆæœºåˆ¶ï¼Œé¡¹ç›®å°†å½»åº•è§£å†³ç¡¬ç¼–ç é—®é¢˜ï¼Œå»ºç«‹å¯æŒç»­çš„å›½é™…åŒ–ç®¡ç†ä½“ç³»ï¼
